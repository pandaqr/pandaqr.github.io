---     
layout: post     
title:  "iOS9更新后的坑"    
date:   2015-10-14 11:34     
categories: IOS     
---     

iOS9出现以后，不但swift出了2.0版本，项目中也有很多其他地方做了更改。     
   
#### Bitcode      
Bitcode is an intermediate representation of a compiled program. Apps you upload to iTunes Connect that contain bitcode will be compiled and linked on the App Store. Including bitcode will allow Apple to re-optimize your app binary in the future without the need to submit a new version of your app to the store.     

Note: For iOS apps, bitcode is the default, but optional. If you provide bitcode, all apps and frameworks in the app bundle need to include bitcode. For watchOS apps, bitcode is required     

简而言之就是用来支持增量更新的，默认开启，开启后可能会给包含C++库的项目造成无法编译的问题。     

**`如何关闭？`**     
项目配置-〉build option里面     

#### app中的HTTP请求被禁了     
错误信息有：`App Transport Security`这样的，主要是因为apple建议使用`HTTPS`而不是`HTTP`。     

**`如何解决？`**     
在项目的`plist`文件中，新建「字典」`NSAppTransportSecurity`，在这个字典中，新建「布尔值」项目`NSAllowsArbitraryLoads`，并将其设置为`YES`。OK。     


---     

下面是一些其他的坑。     

#### 启动图片比你想象得要重要     
iOS7闪退因为启动图片不对，app打开后画面不能撑满屏幕因为启动图片在项目中设置得不对。这种诡异的bug浪费了我大量的时间。     


#### 签名证书的问题     
怪事1: ad-hoc分发给测试人员闪退，且在本机使用真实手机调试（手机连在电脑上测试）说进程丢失。而直接在手机中跑却ok。     
原因：在building setting里面不是有设置code signing嘛，develop就用develop的证书，release就用release的证书。我本来全都用release的，查了stack overflow才知道这还有讲究。     

怪事2: 在开发者中心注册、并且下载了最新的证书，在export安装包签名的时候却仍旧默认用老的证书。     
原因：这是xcode的bug，默认就是使用列表里面的第一个，需要手动把老的证书删除，注意要在xcode里面删除，在文件夹里面删除没用的。     


#### 关于Swift与OC混合编程
实际测试下来，混合编程后在iOS7会发生无缘无故的bug导致闪退。
