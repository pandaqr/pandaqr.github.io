---     
layout: post     
title:  "正则表达式基础"     
date:   2014-12-21 23:32:00     
categories: 其他     
---     

【正则表达式】是一种“不学不会死人，可是你总要学”的技能。鉴于其在各种语言内通用，且大有技术含量，需要经验的积累。所以，这样的技术就如同背单词一样，了解的越早越好。     

学习的素材是《精通正则表达式》。此书虽然号称“精通”，但是对新手还是比较友好的，后半册则可以当做字典，是一本经典好书。重要的是，它告诉你`什么问题可以用正则解决`。     

此笔记为书中第一章的内容，包含所有正则表达式语法，供参考查询。该书认为，掌握具体深入的原理与技巧的学习曲线非常陡峭，需一气呵成学完，然后此生不忘。所以暂且在需要时再深入。     

#### 【单元】的概念(unit)    
模式匹配时，是按顺序，对模式中的每个【单元】`挨个`进行匹配。    
【字符组】和【小括号】都是整体作为一个单元，而【量词】则是修饰前面的单元，本身不是一个单元。     
[注]`.`符号，也是一个单元。意思是：匹配任何一个字符（除了回车）    
特别的，【位置】字符也是一个单元，例如:`^cat`不能理解为【匹配一个出现在行首的cat】，而应该是【先匹配一个`行首`，再匹配一个c，在一个a，在一个t】     

#### 【量词】     
`?`  --  至多一个（要么没有，要么有一个）        
`+`  --  至少一个    
`*`  --  任意多个（可以没有）    
`{a,b}`  --  a个至b个    

#### 【“或”的逻辑】     
`|`表示“或”，例如`expressionA|expressionB`表示匹配expressionA或expressionB。（优先匹配A？）        

#### 【子表达式】的概念(subexpression)     
通常是：【小括号】内的表达式，或，由`|`分割的【分支】    
【注意】对于`|`，注意使用小括号限定其范围，否则就是`全局或`。     

#### 字符组`[]`     
表示匹配本组字符中的任意一个字符。    
【注意】     
1.一个字符组，匹配的字符只能是`一个`    
2.可以用连词符`-`来表示一个`字符编码`的范围，但是如果出现在字符组的`开头`，就表示连词符本身。    
3.字符组中的【其他元字符】都表示其本来的含义，排除符`^`除外。    
4.当且仅当`^`在字符组的`开头`时，这个字符组表示【匹配一个除这组字符以外的任意一个字符，但不能没有！】。如果`^`在字符组的中间位置，则表示`^`符号本身。    

#### 【位置】匹配     
`^`  --  行首    
`$`  --  行尾    
`\<`  --  单词的开头    
`\>`  --  单词的结尾    

#### 【单词分界符】的判定     
逻辑上，单词分隔符匹配一个位置，实现上，匹配的是`符号`，即【非数字】且【非字母】    
`\<`表示【匹配一个符号，后面是个数字或字母】    
`\>`表示【匹配一个符号，前面是一个数字或字母】    
所以注意，对于`a1b2c3`的前后，都会被单词分界符匹配    
对于`真正的单词`，使用`\<[a-zA-Z]+\>`匹配即可。    

#### 【反向引用】     
`\1`、`\2`表示表达式中的`第一`、`第二`个「括号」所`匹配的文本`。有点`变量`的味道。    
例子：`\<([A-Za-z]+) +\1\>`-表示匹配两个连续相同的单词。     


#### 我的应用

如果行末尾没有四个空格，则增加4个空格
`sed -i.bakup.md 's/\([^ ].\{0,3\}$\)/\1     /g'  `

代码行数统计（比wc -l更准）
`Cat ./* | egrep -c '^.' `


