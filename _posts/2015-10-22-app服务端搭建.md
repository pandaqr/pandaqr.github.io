---     
layout: post     
title:  "App服务端搭建"     
date:   2015-10-22 18:25     
categories: TOOLS     
---     

搭建一个简单的app后端其实并没有太大的技术含量，但是这个过程中还是遇到一些坑的。     

#### 服务器的连接     
对于云端的服务器来说，首先遇到的问题是：代码虽然可以远程用vim写，长期看来总需要传文件，怎么方便？     
答：`scp`命令。[注]批量传输可用通配符，但是需要加转义斜杠.     

例子：    
`scp root@120.27.54.111:/var/www/\*.php ~/Desktop`    
`scp statistic.php root@120.27.54.111:/var/www/` 

另外，对于在线编辑代码的延迟，有什么解决方案嘛？     
答：`mosh`开源shell，可以在本地进行预判响应。     

#### 服务编写     
补充两个原来不清楚的知识：     
1.对于app服务器，80端口需要让出来给网页，apache服务器怎么更换监听端口？     
答：配置文件夹里找到`「ports.conf」`，里面有一句`listen 80`，我相信你懂了。然后记得重启apache。     

2.想要定期运行脚本清理数据库怎么实现？     
答：`crontab`命令。`-e`编辑，`-l`就是list，`-r`删除。     

3.PHP的本地调试     
好吧，我是最近才知道php可以本地执行的，`php PHP_filePath`就能运行了，直接echo在命令行里。    

4.关于状态码「`重要`」     
可能是由于约定俗称的原因，服务端返回的状态码基本与HTTP协议一致，AFNetwording网络库就规定只有200-299的状态码才算“成功”。     
对于HTTP状态码，引用一个最近看到的cheatsheet，非常形象：     
1xx, hold on （等一下，正在处理）     
2xx, here you go!  （ok，正确）     
3xx, go away  （跳转至其他页面）     
4xx, you fucked up  （请求错误，如404页面不存在）     
5xx, I fucked up  （服务器错误，如502 bad gateway）     


#### 缓存     
1.本地缓存，就是写磁盘文件。     
2.radis内存缓存。     

#### 其他注意事项     
为了防止app端挂掉，尽量在服务端出错时也给予响应。     


进一步参考：
http://www.cnblogs.com/shangdahao/archive/2013/06/01/3111755.html


